{% extends 'base.html' %}

{% block title %}Let's Find Good Food{% endblock %}

{% block head %}

  <script src="/static/js/detailsmap.js"></script>
  <script
    async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUGVnroWJpcUmeIrmjxJfmSAObDacF7Q8&callback=initMap">
  </script>
{% endblock %}

{% block content %}
<!-- <section class="map" style="height:100%; width:100%">
    <div id="map"></div>
</section> -->
<div id='restaurant_details'>
    
    <h2>{{ data['name'] }}</h2>
    <p>
        <b>Cuisine Type(s):</b> |{% for category in data['categories'] %}  
                            {{ category['title']}} |
                          {% endfor %}  
    </p>
    <p>
        <b>Price:</b> {{ data['price']}}
    </p>
    <p>
        <b>Phone:</b> {{ data['display_phone']}}
    </p>    
    <p>
        <b>Address:</b> {% for line in data['location']['display_address'] %}
                          {{ line }}
                        {% endfor %}   
    </p>                
    <p>
        <b>Hours:</b> 
            {% if 'hours' in data %} 
            <p>
                Currently {% if data['hours'][0].is_open_now %} Open! 
                {% else %} Closed :( {% endif %}
            </p>
            <p>              
                {% for day, hours in day_determiner(data['hours'][0].open).items() %} 
                    <p>{{ day }}: {{ hours }}</p>
                {% endfor %}        
            </p>     
            {% else %}
            This business does not have its hours listed on Yelp. :(
            {% endif %}

    </p>

    <p><b>Some Photos:</b></p>
    {% for photo_url in data['photos'] %}
      <img src="{{ photo_url }}">
    {% endfor %}  
    
</div>
<div class ='action_butts'>
    <p>
    {% if current_user.is_anonymous %}
        <a href='/loginpage'>Log In to Rate This Restauarant!</a> 
    {% else %}
        <form action='/iwenthere/{{data["id"]}}'>
            <button type="submit">I went here and wish to pass judgement.</button>
        </form>
    {% endif %}
    </p>
    Show me:
    <form method ='POST' action='/api/search-again'>
        <button type="submit" name='search-again-button' value="random">Another Random Listing</button>
        <button type="submit" name='search-again-button' value="nearby">List of Nearby Foods</button>
        <button type="submit" name='search-again-button' value="ideas">The Ideas</button>
    </form>
</div>
{% endblock %}